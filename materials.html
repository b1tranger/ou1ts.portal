<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materials - oU1TS Portal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- SUPABASE -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <button class="auth-modal-close" onclick="closeAuthModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <h2 id="authModalTitle">Login</h2>
            
            <div id="authError" class="auth-error"></div>
            <div id="authSuccess" class="auth-success"></div>

            <!-- Complete Profile Form (Google OAuth) -->
            <form id="completeProfileForm" style="display: none;" onsubmit="handleCompleteProfile(event)">
                <p class="auth-switch">Please add your Student ID to continue.</p>
                <div class="form-group">
                    <label for="completeStudentId">Student ID</label>
                    <input type="text" id="completeStudentId" required placeholder="At least 10 digits"
                        pattern="\d{10,}">
                </div>
                <button type="submit" class="auth-submit-btn">Save Student ID</button>
                <button type="button" class="auth-secondary-btn" onclick="handleProfileLogout()">Logout</button>
            </form>

            <!-- Login Form -->
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="Your password">
                </div>
                <button type="submit" class="auth-submit-btn">Login</button>
                <p class="auth-switch">
                    Don't have an account? 
                    <a href="#" onclick="switchAuthMode('register'); return false;">Register</a>
                </p>
            </form>

            <!-- Register Form -->
            <form id="registerForm" style="display: none;" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="registerStudentId">Student ID</label>
                    <input type="text" id="registerStudentId" required placeholder="At least 10 digits" pattern="\\d{10,}">
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" required minlength="6" placeholder="Min 6 characters">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" required placeholder="Confirm password">
                </div>
                <button type="submit" class="auth-submit-btn">Register</button>
                <p class="auth-switch">
                    Already have an account? 
                    <a href="#" onclick="switchAuthMode('login'); return false;">Login</a>
                </p>
            </form>
        </div>
    </div>

    <div class="category-page">
        <header class="category-header">
            <a href="index.html" class="back-btn">
                <i class="fa-solid fa-arrow-left"></i>
                Back
            </a>
            <div class="category-icon" style="background: linear-gradient(135deg, #f3e5f5, #e1bee7);">
                <i class="fa-solid fa-graduation-cap" style="color: #7b1fa2;"></i>
            </div>
            <div class="category-info">
                <h1>Materials</h1>
                <p>Academic Resources and Links</p>
            </div>
            <div class="header-actions">
                <a href="https://forms.gle/UR1HSavWJYdPBPnC8" target="_blank" class="add-link-btn">
                    <i class="fa-solid fa-plus"></i>
                    ADD LINK
                </a>
                <!-- Auth Section -->
                <button class="auth-btn" id="authBtn" onclick="openAuthModal('login')">
                    <i class="fa-solid fa-right-to-bracket"></i>
                </button>
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-details" id="userDetails"></div>
                    <button class="logout-btn" id="logoutBtn" onclick="handleLogout()">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </button>
                </div>
            </div>
        </header>

        <div class="project-list">
            <div class="project-item" data-resource-id="materials-uitsbot">
                <span class="project-number">01</span>
                <div class="project-icon" style="background: linear-gradient(135deg, #e3f2fd, #bbdefb);">
                    <!-- <i class="fa-solid fa-robot" style="color: #1976d2;"></i> -->
                     <img src="materials-icon/UITS-Bot.webp">
                </div>
                <div class="project-info">
                    <h3>UITS Bot</h3>
                    <p class="repo-info">This is a utility website where students can check their cgpa for each semester,  see class routines in a formatted way, and find handwritten notes from previous batch students.<br><a href="https://github.com/AkibReza/uitsBOT" target="_blank">Source Code</a> | <a href="https://github.com/AkibReza" target="_blank">Dev</a></p>
                </div>
                <div class="project-actions">
                    <button class="star-btn disabled" onclick="Stars.toggleStar('materials-uitsbot')" title="Login to star resources">
                        <i class="fa-solid fa-star"></i>
                        <span class="star-count">0</span>
                    </button>
                    <a href="http://akibreza.github.io/uitsBOT" class="visit-btn" target="_blank">
                        Visit <i class="fa-solid fa-arrow-up-right-from-square"></i>
                    </a>
                    <button class="copy-btn" onclick="copyLink('http://akibreza.github.io/uitsBOT')">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="project-item" data-resource-id="materials-b1tacad">
                <span class="project-number">02</span>
                <div class="project-icon" style="background: linear-gradient(135deg, #f3e5f5, #e1bee7);">
                    <!-- <i class="fa-solid fa-graduation-cap" style="color: #7b1fa2;"></i> -->
                     <img src="materials-icon/b1t-acad.webp">
                </div>

                <div class="project-info">
                    <h3>b1t Academics</h3>
                    <p class="repo-info">b1t Academics is a comprehensive, student-maintained archive for UITS (University) resources. It serves as a central hub for course materials, question banks, class routines, and academic guidelines, aiming to solve the fragmentation of resources across different platforms.<br><a href="https://github.com/b1tranger/b1t-Acad" target="_blank">Source Code</a> | <a href="https://github.com/b1tranger" target="_blank">Dev</a></p>
                </div>
                <div class="project-actions">
                    <button class="star-btn disabled" onclick="Stars.toggleStar('materials-b1tacad')" title="Login to star resources">
                        <i class="fa-solid fa-star"></i>
                        <span class="star-count">0</span>
                    </button>
                    <a href="https://b1tacad.netlify.app/" class="visit-btn" target="_blank">
                        Visit <i class="fa-solid fa-arrow-up-right-from-square"></i>
                    </a>
                    <button class="copy-btn" onclick="copyLink('https://b1tacad.netlify.app/')">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="project-item" data-resource-id="materials-uniCompanion">
                <span class="project-number">03</span>
                <div class="project-icon" style="background: linear-gradient(135deg, #fff3e0, #ffe0b2);">
                    <i class="fa-solid fa-users" style="color: #f57c00;"></i>
                </div>
                <div class="project-info">
                    <h3>University Companion</h3>
                    <p class="repo-info">In this website, you will find the Academic calendar and the previous years' exam questions of the previous batches of CSE department, UITS. We also added an interactive scheduler where students can update their class records for each week.<br><a href="https://github.com/Zirconium001/echoes_of_the_past" target="_blank">Source Code</a> (old) | <a href="https://github.com/Zirconium001" target="_blank">Dev-1</a> | <a href="https://github.com/RabbitJahir" target="_blank">Dev-2</a></p>
                </div>
                <div class="project-actions">
                    <button class="star-btn disabled" onclick="Stars.toggleStar('materials-uniCompanion')" title="Login to star resources">
                        <i class="fa-solid fa-star"></i>
                        <span class="star-count">0</span>
                    </button>
                    <a href="https://university-companion.netlify.app/" class="visit-btn" target="_blank">
                        Visit <i class="fa-solid fa-arrow-up-right-from-square"></i>
                    </a>
                    <button class="copy-btn" onclick="copyLink('https://university-companion.netlify.app/')">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/supabase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/stars.js"></script>
    <script>
        function copyLink(url) {
            navigator.clipboard.writeText(url).then(() => {
                alert('Link copied to clipboard!');
            });
        }

        // Initialize stars for this page
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                Stars.init('materials');
            }, 500);
        });
    </script>
</body>

</html>